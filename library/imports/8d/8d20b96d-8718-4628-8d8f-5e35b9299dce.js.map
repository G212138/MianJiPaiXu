{"version":3,"sources":["assets\\game\\scripts\\UI\\Item\\GameUI.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { ListenerManager } from \"../../../../frame/scripts/Manager/ListenerManager\";\r\nimport { SoundManager } from \"../../../../frame/scripts/Manager/SoundManager\";\r\nimport { SyncDataManager } from \"../../../../frame/scripts/Manager/SyncDataManager\";\r\nimport { Tools } from \"../../../../frame/scripts/Utils/Tools\";\r\nimport { UIHelp } from \"../../../../frame/scripts/Utils/UIHelp\";\r\nimport { EventType } from \"../../Data/EventType\";\r\nimport DituDrag from \"./DituDrag\";\r\nimport FillArea from \"./FillArea\";\r\nimport { SoundConfig } from \"./SoundConfig\";\r\n\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GameUI extends cc.Component {\r\n    @property(sp.Skeleton)\r\n    private start_anim: sp.Skeleton = null;\r\n    @property(cc.Node)\r\n    private ditu_panel: cc.Node = null;\r\n    @property(cc.Node)\r\n    private fill_node: cc.Node = null;\r\n    @property(sp.Skeleton)\r\n    private pipi: sp.Skeleton = null;\r\n\r\n    onLoad() {\r\n        ListenerManager.on(EventType.ENTER_GAME, this.handleEnterGame, this);\r\n        ListenerManager.on(EventType.GAME_RECONNECT, this.resetUI, this);\r\n        ListenerManager.on(EventType.GAME_REPLAY, this.handleEnterGame, this);\r\n        ListenerManager.on(EventType.ON_DRAG_DITU_END, this.handleDragEnd, this);\r\n    }\r\n\r\n    onDestroy() {\r\n        ListenerManager.off(EventType.ENTER_GAME, this.handleEnterGame, this);\r\n        ListenerManager.off(EventType.GAME_RECONNECT, this.resetUI, this);\r\n        ListenerManager.off(EventType.GAME_REPLAY, this.handleEnterGame, this);\r\n        ListenerManager.off(EventType.ON_DRAG_DITU_END, this.handleDragEnd, this);\r\n    }\r\n\r\n    private handleEnterGame() {\r\n        this.resetUI();\r\n        this.initUI();                \r\n        this.playStartAnim();\r\n        UIHelp.showMask();        \r\n    }\r\n\r\n    private resetUI() {\r\n        this.initUI();\r\n        this.start_anim.node.active = false;\r\n        UIHelp.closeMask();\r\n        for (let i = 0; i < this.fill_node.childrenCount; i++) {\r\n            let fillArea = this.fill_node.children[i].getChildByName(\"fillArea\");\r\n            if (fillArea.childrenCount > 0) {\r\n                fillArea.children[0].getComponent(DituDrag).reset();\r\n            }\r\n        }\r\n        for (let i = 0; i < SyncDataManager.getSyncData().customSyncData.answers.length; i++) {\r\n            if (SyncDataManager.getSyncData().customSyncData.answers[i] != null) {\r\n                for (let j = 0; j < this.ditu_panel.childrenCount; j++) {\r\n                    if (this.ditu_panel.children[j].name == SyncDataManager.getSyncData().customSyncData.answers[i]) {\r\n                        this.ditu_panel.children[j].getChildByName(\"mianji_1\").active = false;\r\n                        this.ditu_panel.children[j].getChildByName(\"mianji_2\").active = true;\r\n                        this.fill_node.children[i].getComponent(FillArea).fill(this.ditu_panel.children[j]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (SyncDataManager.getSyncData().frameSyncData.isGameOver) {\r\n            this.pipi.node.active = true;\r\n            Tools.playSpine(this.pipi, \"win2\", true);\r\n        }\r\n    }\r\n\r\n    private handleDragEnd() {\r\n        let answers = [];\r\n        for (let i = 0; i < this.fill_node.childrenCount; i++) {\r\n            let fillArea = this.fill_node.children[i].getChildByName(\"fillArea\");\r\n            if (fillArea.childrenCount > 0) {\r\n                answers.push(fillArea.children[0].name);\r\n            } else {\r\n                answers.push(null);\r\n            }\r\n        }\r\n        SyncDataManager.getSyncData().customSyncData.answers = answers;\r\n    }\r\n\r\n    private initUI() {\r\n        this.pipi.node.active = false;\r\n        this.start_anim.node.active = true;\r\n        for (let i = 0; i < this.fill_node.childrenCount; i++) {\r\n            let kuang = this.fill_node.children[i].getChildByName(\"kuang\");\r\n            let neikuang = this.fill_node.children[i].getChildByName(\"neikuang\");\r\n            kuang.active = false;\r\n            neikuang.active = false;\r\n        }\r\n    }\r\n\r\n    private playStartAnim() {\r\n        this.start_anim.node.active = true;\r\n        this.start_anim.node.opacity = 255;\r\n        Tools.playSpine(this.start_anim, \"db1\", false, () => {\r\n            Tools.playSpine(this.start_anim, \"db1_idle\", false, () => {\r\n                Tools.playSpine(this.start_anim, \"db2\", false, () => {\r\n                    Tools.playSpine(this.start_anim, \"db3\", false, () => {\r\n                        cc.tween(this.start_anim.node).to(0.5, { opacity: 0 }).call(() => {\r\n                            this.start_anim.node.active = false;\r\n                            UIHelp.closeMask();\r\n                        }).start();\r\n                    });\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    private trueAnswer = ['shandong_tuqi', \"sichuan_tuqi\", \"henan_tuqi\", \"ningxia_tuqi\", \"qinghai_tuqi\", \"shanxi1-tuqi\", \"gansu_tuqi\", \"shanxi_tuai\", \"neimeng_tuqi\"];\r\n    private onClickCheck() {\r\n        SoundManager.playEffect(SoundConfig.soudlist[\"点击音效\"], false, false);\r\n        let isAllRight = true;\r\n        let selfAnswer = SyncDataManager.getSyncData().customSyncData.answers;\r\n        for (let i = 0; i < selfAnswer.length; i++) {\r\n            if (selfAnswer[i] != this.trueAnswer[i]) {\r\n                isAllRight = false;\r\n                SyncDataManager.getSyncData().customSyncData.answers[i] = null;\r\n            }\r\n        }\r\n\r\n        if (isAllRight) {\r\n            this.handleAllRight();\r\n        } else {\r\n            this.handleWrong();\r\n        }\r\n    }\r\n\r\n    private handleAllRight() {\r\n        ListenerManager.dispatch(EventType.SUBMIT, true);\r\n        SoundManager.playEffect(SoundConfig.soudlist[\"正确反馈01\"], false, false);\r\n        for (let i = 0; i < this.fill_node.childrenCount; i++) {\r\n            let neikuang = this.fill_node.children[i].getChildByName(\"neikuang\");\r\n            neikuang.active = true;\r\n            neikuang.color = cc.Color.GREEN;\r\n        }\r\n        this.pipi.node.active = true;\r\n        Tools.playSpine(this.pipi, \"win\", false, () => {\r\n            Tools.playSpine(this.pipi, \"win2\", true, () => {\r\n                \r\n            });\r\n        });\r\n        this.scheduleOnce(() => {\r\n            ListenerManager.dispatch(EventType.GAME_OVER);\r\n        }, 2);\r\n    }\r\n\r\n    private handleWrong() {\r\n        ListenerManager.dispatch(EventType.SUBMIT, false);\r\n        SoundManager.playEffect(SoundConfig.soudlist[\"错误音效\"], false, false, false, () => {\r\n            SoundManager.playEffect(SoundConfig.soudlist[\"错误音效\"], false, false);\r\n        });\r\n        let selfAnswer = SyncDataManager.getSyncData().customSyncData.answers;\r\n        for (let i = 0; i < selfAnswer.length; i++) {\r\n            if (selfAnswer[i] != this.trueAnswer[i]) {\r\n                let kuang = this.fill_node.children[i].getChildByName(\"kuang\");\r\n                kuang.active = true;\r\n                kuang.color = cc.Color.RED;\r\n                cc.tween(kuang).to(0.1, { opacity: 255 }).delay(0.15).to(0.1, { opacity: 0 })\r\n                .to(0.1, { opacity: 255 }).delay(0.15).to(0.1, { opacity: 0 })\r\n                .to(0.1, { opacity: 255 }).delay(0.15).to(0.1, { opacity: 0 })\r\n                .to(0.1, { opacity: 255 }).delay(0.15).to(0.1, { opacity: 0 })\r\n                .to(0.1, { opacity: 255 }).delay(0.15).to(0.1, { opacity: 0 })\r\n                .to(0.1, { opacity: 255 }).delay(0.15).to(0.1, { opacity: 0 })\r\n                .to(0.1, { opacity: 255 }).delay(0.15).to(0.1, { opacity: 0 })\r\n                .call(() => {\r\n                    if (this.fill_node.children[i].getChildByName(\"fillArea\").childrenCount > 0) {\r\n                        kuang.active = false;\r\n                        this.fill_node.children[i].getChildByName(\"fillArea\").children[0].getComponent(DituDrag).reset();\r\n                    }\r\n                }).start();\r\n            }\r\n        }\r\n    }\r\n}\r\n"]}